# Docker prod

Перед запуском необходимо переименовать ```.env.example``` и ```.env``` и ввести свои данные.

Запуск:

```docker-compose -f docker-compose-prod.yml up --build```

# Внимание *-local.php не перезаписываются на Prod.

Необходимо принудительно делать перезапись:

```/app/init --env=Production --overwrite=All```

Основные контейнер ```mysql```,```nginx```, ```php-fpm```.

Вспомогательные ```composer``` и ```init-app``` запускаются один раз и умирают сразу после выполнения своих функций. 

Composer накатывает зависимости из composer.(json/lock).

Init-app запускает скрипт init для advanced и накатывает миграции. 

Init скрипт не перезаписывает -local конфиги между запусками.

Для инициализации базы используется ```dbinit.sql``` и ```.env``` для пароля. 